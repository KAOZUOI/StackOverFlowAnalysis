<plugin>    <groupId>org.jacoco</groupId>    <artifactId>jacoco-maven-plugin</artifactId>    <version>${jacoco-maven-plugin.version}</version>    <executions>        <!-- Prepare the agent for the Unit Tests -->        <execution>            <id>pre-unit-test</id>            <goals>                <goal>prepare-agent</goal>            </goals>            <configuration>                <destFile>${project.build.directory}/coverage-reports/jacoco-ut.exec</destFile>                <propertyName>surefireArgLine</propertyName>            </configuration>        </execution>        <!-- Generate the report for the Unit Tests -->        <execution>            <id>post-unit-test</id>            <phase>test</phase>            <goals>                <goal>report</goal>            </goals>            <configuration>                <dataFile>${project.build.directory}/coverage-reports/jacoco-ut.exec</dataFile>                <outputDirectory>${project.reporting.outputDirectory}/jacoco-ut</outputDirectory>            </configuration>        </execution>        <!-- Prepare the agent for the Integration Tests -->        <execution>            <id>pre-integration-test</id>            <phase>pre-integration-test</phase>            <goals>                <goal>prepare-agent-integration</goal>            </goals>            <configuration>                <destFile>${project.build.directory}/coverage-reports/jacoco-it.exec</destFile>                <propertyName>failsafeArgLine</propertyName>            </configuration>        </execution>        <!-- Generate the report for the Integration Test -->        <execution>            <id>post-integration-test</id>            <phase>post-integration-test</phase>            <goals>                <goal>report-integration</goal>            </goals>            <configuration>                <!-- excluding everything except controller class -->                <excludes>                    <exclude>**/common/*.class</exclude>                    <exclude>**/config/*.class</exclude>                    <exclude>**/domain/*.class</exclude>                    <exclude>**/exception/*.class</exclude>                    <exclude>**/mapper/*.class</exclude>                    <exclude>**/service/*.class</exclude>                    <exclude>**/simulator/Main.class</exclude>                </excludes>                <dataFile>${project.build.directory}/coverage-reports/jacoco-it.exec</dataFile>                <outputDirectory>${project.reporting.outputDirectory}/jacoco-it</outputDirectory>                <sourceEncoding>${project.build.sourceEncoding}</sourceEncoding>                <classFilesDIrectory>${project.build.directory}/classes</classFilesDIrectory>            </configuration>        </execution>                <!-- Merge Unit Tests and Integration Tests reports -->        <execution>            <id>merge-unit-and-integration</id>            <phase>post-integration-test</phase>            <goals>                <goal>merge</goal>            </goals>            <configuration>                <fileSets>                    <fileSet>                        <directory>${project.build.directory}/coverage-reports</directory>                        <includes>                            <include>*.exec</include>                        </includes>                    </fileSet>                </fileSets>                <destFile>${project.build.directory}/coverage-reports/merged.exec</destFile>            </configuration>        </execution>        <!-- Report the merged report -->        <execution>            <id>report-merged-report</id>            <phase>post-integration-test</phase>            <goals>                <goal>report</goal>            </goals>            <configuration>                <dataFile>${project.build.directory}/coverage-reports/merged.exec</dataFile>                <outputDirectory>${project.reporting.outputDirectory}/jacoco-merged</outputDirectory>            </configuration>        </execution>        <!-- Check the coverage -->        <execution>            <id>check</id>            <phase>verify</phase>            <goals>                <goal>check</goal>            </goals>            <configuration>                <rules>                    <rule>                        <element>BUNDLE</element>                        <!-- Make sure you exclude your tests from coverage -->                        <excludes>                            <exclude>*Test</exclude>                            <exclude>*IT</exclude>                        </excludes>                        <limits>                            <limit>                                <counter>INSTRUCTION</counter>                                <value>COVEREDRATIO</value>                                <!-- This will probably fail your build :) -->                                <minimum>100</minimum>                            </limit>                        </limits>                    </rule>                </rules>                <dataFile>${project.build.directory}/coverage-reports/merged.exec</dataFile>            </configuration>        </execution>    </executions></plugin>