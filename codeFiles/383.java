int workHourStartUtc = 6;int workHourEndUtc = 15;int expiryWindow = 8;int currentHourUtc = LocalDateTime.now(ZoneOffset.UTC).getHour();int hourCompletedToday = currentHourUtc - workHourStartUtc;int offHours = LocalDate.now().getDayOfWeek() == 1 ? 72 : 24;LocalDateTime yesterdayWorkEndUtc = LocalDateTime.now(ZoneOffset.UTC).toLocalDate().atTime(workHourEndUtc, 0).minusHours(offHours);LocalDateTime expireDateBefore = hourCompletedToday >= expiryWindow ? LocalDateTime.now(ZoneOffset.UTC).minusHours(expiryWindow): yesterdayWorkEndUtc.minusHours(expiryWindow - hourCompletedToday);